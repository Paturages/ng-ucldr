"use strict";angular.module("ngUcldr",[]).filter("f1",function(){return function(t,n,c){var e,r,d=1;for(e=0;c>e;e++)t[0][e]="";for(e=c;7>e;e++)t[0][e]=d++;for(e=1;6>e;e++)for(r=0;7>r;r++)t[e][r]=n>=d?d++:"";return t}}).directive("ngUcldr",["$window",function(t){return{restrict:"E",scope:{f:"=bindTo",i:"=init"},controller:function(t){var n=t,c=new Date;n.s=!1,n.tg=function(t){t&&(n.c.y<n.n.y||n.c.m<n.n.m||t<=n.n.d)&&(n.s=!n.s||!t,n.c.d=t)},n.lm=["Jan","Feb","Mar","Apr","May","June","Jul","Aug","Sep","Oct","Nov","Dec"],n.ld=["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],n.n={d:c.getDate(),m:c.getMonth(),y:c.getFullYear()},n.ly=[];for(var e=0;20>e;e++)n.ly[e]=n.n.y-e;n.gnd=function(){return new Date(n.c.y,+n.c.m+1,0).getDate()},n.gds=function(){var t=new Date(n.c.y,n.c.m,1).getDay();return 6==t?0:t+1},n.ts=function(){var t=n.c.m<9?"0"+(+n.c.m+1):+n.c.m+1,c=n.c.d<10?"0"+n.c.d:n.c.d;return n.c.y+"-"+t+"-"+c},n.dm=function(){n.c.m?n.c.m--:(n.c.m=11,n.c.y--)},n.im=function(){(n.c.y<n.n.y||n.c.m<n.n.m)&&(11==n.c.m?(n.c.m=0,n.c.y++):n.c.m++)},n.c={d:n.n.d,m:n.n.m,y:n.n.y},n.de=function(t){return""==t?"":t==n.c.d?"slct":n.c.y>n.n.y?"ftr":n.c.y<n.n.y?"pst":n.c.m>n.n.m?"ftr":n.c.m<n.n.m?"pst":t>n.n.d?"ftr":t<n.n.d?"pst":"tdy"},n.t=[[],[],[],[],[],[]]},template:'<div class="ucldr-text" ng-click="s=!s">{{ts()}}</div><table class="ucldr" ng-if="s"><thead><tr><th><button type="button" ng-click="dm()">&lt;</button></th><th colspan=5><select class="ucldr_month" ng-model="c.m"><option ng-repeat="m in lm" value="{{$index}}" ng-selected="c.m==$index" ng-disabled="c.y==n.y&&$index>n.m">{{m}}</option></select><select class="ucldr_year" ng-model="c.y" ng-options="y for y in ly"></select></th><th><button type="button" ng-click="im()">&gt;</button></th></tr></thead><tbody><tr><th ng-repeat="d in ld">{{d}}</th></tr><tr ng-repeat="w in t | f1: gnd(): gds()"><td ng-repeat="d in w track by $index" class="{{de(d)}}" ng-click="tg(d)">{{d}}</td></tr></tbody></table>',link:function(n,c){if(n.i)for(var e in n.i)n.c[e]=n.i[e];n.f=n.c,c.bind("click",function(t){t.stopPropagation()}),angular.element(t).on("click",function(){n.s=!1,n.$apply()})}}}]);