"use strict";angular.module("ngUcldr",[]).filter("ucldr_f_days",function(){return function(t,n,e){var r,o,a=1;for(r=0;e>r;r++)t[0][r]="";for(r=e;7>r;r++)t[0][r]=a++;for(r=1;6>r;r++)for(o=0;7>o;o++)t[r][o]=n>=a?a++:"";return t}}).filter("ucldr_f_month",function(){return function(t,n,e,r){var o=t.slice();if(n==r)for(var a=e+1;12>a;a++)o.pop();return o}}).directive("ngUcldr",function(){return{restrict:"E",scope:{field:"=ucldrModel"},controller:function(t){var n=new Date;t.months=["Jan","Feb","Mar","Apr","May","June","Jul","Aug","Sep","Oct","Nov","Dec"],t.days=["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],t.now={day:n.getDate(),month:n.getMonth(),year:n.getFullYear()},t.years=[];for(var e=0;20>e;e++)t.years[e]=t.now.year-e;t.c={day:t.now.day,month:t.now.month,year:t.now.year,getNbDays:function(){return new Date(this.year,parseInt(this.month)+1,0).getDate()},getDayStart:function(){var t=new Date(this.year,this.month,1).getDay();return 6==t?0:t+1},toString:function(){return this.year+"-"+(parseInt(this.month)+1)+"-"+this.day},decrMonth:function(){0==this.month?(this.month=11,this.year--):this.month--},incrMonth:function(){(this.year<t.now.year||this.month<t.now.month)&&(11==this.month?(this.month=0,this.year++):this.month++)}},t.dateEval=function(n){return""==n?"":t.c.year>t.now.year?"ucldr_future":t.c.year<t.now.year?"ucldr_past":t.c.month>t.now.month?"ucldr_future":t.c.month<t.now.month?"ucldr_past":n==t.c.day?"ucldr_selected":n>t.now.day?"ucldr_future":n<t.now.day?"ucldr_past":"ucldr_today"},t.tab=[[],[],[],[],[],[]]},template:'<div class="ucldr-text">{{c.toString()}}</div><table class="ucldr"><thead><tr><th><button ng-click="c.decrMonth()">&lt;</button></th><th colspan=5><select class="ucldr_month" ng-model="c.month"><option ng-repeat="m in months | ucldr_f_month: c.year: now.month: now.year" value="{{$index}}" ng-selected="{{now.month == $index}}">{{m}}</option></select><select class="ucldr_year" ng-model="c.year" ng-options="y for y in years"></select></th><th><button ng-click="c.incrMonth()">&gt;</button></th></tr></thead><tbody><tr><th ng-repeat="day in days">{{day}}</th></tr><tr ng-repeat="week in tab | ucldr_f_days: c.getNbDays(): c.getDayStart()"><td ng-repeat="day in week track by $index" class="{{dateEval(day)}}" ng-click="c.day = day">{{day}}</td></tr></tbody></table>',link:function(t,n){n[0].childNodes[1].hidden=!0,n[0].childNodes[0].onclick=function(){n[0].childNodes[1].hidden=!n[0].childNodes[1].hidden},t.field={day:t.c.day,month:t.c.month,year:t.c.year,toString:t.c.toString}}}});